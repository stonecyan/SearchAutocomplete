{"ast":null,"code":"var _jsxFileName = \"/Users/Stone/Desktop/TextIQ/autocomplete/src/App.js\";\nimport React from 'react';\nimport Fuse from 'fuse.js';\nimport faker from 'faker'; // --------------- API START --------------\n\nfunction simulateResponseTime({\n  min,\n  max\n}) {\n  return Math.floor(Math.random() * (max - min) + min);\n}\n\nfaker.seed(42);\nconst users = Array.from({\n  length: 100\n}).map(() => {\n  return {\n    name: faker.name.findName(),\n    email: faker.internet.email()\n  };\n});\nconst fuse = new Fuse(users, {\n  shouldSort: true,\n  threshold: 0.6,\n  location: 0,\n  distance: 100,\n  maxPatternLength: 32,\n  minMatchCharLength: 1,\n  keys: [\"name\"]\n});\n/**\n * Search users by name\n * @param {string} query - The query to search users by\n * @return {Promise<{ name: string; email: string; }[]>} Search result\n */\n\nfunction searchUsersByName(query) {\n  return new Promise(resolve => {\n    window.setTimeout(() => {\n      resolve(fuse.search(query));\n    }, simulateResponseTime({\n      min: 200,\n      max: 350\n    }));\n  });\n} // ---------------- API END ---------------\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      numberSuggestion: 0,\n      suggestions: [],\n      show: false,\n      userInput: ''\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n  }\n\n  onChange(e) {\n    const userInput = e.target.value;\n    searchUsersByName(userInput).then(suggestions => {\n      console.log(suggestions);\n      this.setState({\n        numberSuggestion: 0,\n        suggestions,\n        show: true,\n        userInput: userInput\n      });\n    });\n  }\n\n  onClick(e) {\n    this.setState({\n      numberSuggestion: 0,\n      suggestions: [],\n      show: false,\n      userInput: e.target.innerText\n    });\n  }\n\n  onKeyDown(e) {\n    const _this$state = this.state,\n          numberSuggestion = _this$state.numberSuggestion,\n          suggestions = _this$state.suggestions; //Enter Key\n\n    if (e.keyCode === 13) {\n      this.setState({\n        numberSuggestion: 0,\n        show: false,\n        userInput: suggestions[numberSuggestion]\n      });\n    } //Up Arrow\n    else if (e.keyCode === 38) {\n        if (numberSuggestion === 0) {\n          return;\n        }\n      } //Down Arrow\n      else if (e.keyCode === 40) {\n          if (numberSuggestion - 1 === suggestions.length - 1) {\n            return;\n          }\n\n          this.setState({\n            numberSuggestion: numberSuggestion + 1\n          });\n        }\n  }\n\n  render() {\n    const onChange = this.onChange,\n          onClick = this.onClick,\n          onKeyDown = this.onKeyDown,\n          _this$state2 = this.state,\n          numberSuggestion = _this$state2.numberSuggestion,\n          suggestions = _this$state2.suggestions,\n          show = _this$state2.show,\n          userInput = _this$state2.userInput;\n    let suggestionList;\n\n    if (show && userInput) {\n      console.log(suggestions);\n\n      if (suggestions.length) {\n        console.log(suggestions.length);\n        suggestionList = React.createElement(\"ul\", {\n          class: \"suggestionList\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, suggestions.map((suggestion, index) => {\n          let className;\n\n          if (index === numberSuggestion) {\n            className = \"activeSuggestion\";\n          }\n\n          return React.createElement(\"li\", {\n            className: className,\n            key: suggestion,\n            onClick: onClick,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 140\n            },\n            __self: this\n          }, suggestion.name);\n        }));\n      } else {\n        suggestionList = React.createElement(\"div\", {\n          className: \"noSuggestionList\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, \"No matching names\"));\n      }\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      onChange: onChange,\n      onClick: onClick,\n      onKeyDown: onKeyDown,\n      value: userInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), suggestionList);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/Stone/Desktop/TextIQ/autocomplete/src/App.js"],"names":["React","Fuse","faker","simulateResponseTime","min","max","Math","floor","random","seed","users","Array","from","length","map","name","findName","email","internet","fuse","shouldSort","threshold","location","distance","maxPatternLength","minMatchCharLength","keys","searchUsersByName","query","Promise","resolve","window","setTimeout","search","App","Component","constructor","props","state","numberSuggestion","suggestions","show","userInput","onChange","bind","onClick","onKeyDown","e","target","value","then","console","log","setState","innerText","keyCode","render","suggestionList","suggestion","index","className"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Fuse from 'fuse.js';\nimport faker from 'faker';\n\n// --------------- API START --------------\n\nfunction simulateResponseTime({ min, max }) {\n  return Math.floor(Math.random() * (max - min) + min)\n}\nfaker.seed(42)\n\nconst users = Array.from({ length: 100 }).map(() => {\n  return {\n    name: faker.name.findName(),\n    email: faker.internet.email()\n  }\n})\n\nconst fuse = new Fuse(users, {\n  shouldSort: true,\n  threshold: 0.6,\n  location: 0,\n  distance: 100,\n  maxPatternLength: 32,\n  minMatchCharLength: 1,\n  keys: [\"name\"]\n})\n\n/**\n * Search users by name\n * @param {string} query - The query to search users by\n * @return {Promise<{ name: string; email: string; }[]>} Search result\n */\nfunction searchUsersByName(query) {\n  return new Promise(resolve => {\n    window.setTimeout(() => {\n      resolve(fuse.search(query));\n    }, simulateResponseTime({ min: 200, max: 350 }));\n  })\n}\n\n// ---------------- API END ---------------\n\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      numberSuggestion: 0,\n      suggestions: [],\n      show: false,\n      userInput:''\n    }\n\n    this.onChange= this.onChange.bind(this)\n    this.onClick= this.onClick.bind(this)\n    this.onKeyDown= this.onKeyDown.bind(this)\n  }\n\n  onChange(e){\n    const userInput = e.target.value\n    searchUsersByName(userInput).then((suggestions) =>{\n        console.log(suggestions)\n\n        this.setState({\n        numberSuggestion: 0,\n        suggestions,\n        show:true,\n        userInput: userInput\n      })\n    })\n\n  }\n\n  onClick(e){\n    this.setState({\n      numberSuggestion: 0,\n      suggestions: [],\n      show: false,\n      userInput: e.target.innerText\n    })\n  }\n\n  onKeyDown(e){\n    const {numberSuggestion, suggestions} = this.state\n    //Enter Key\n    if(e.keyCode===13){\n      this.setState({\n        numberSuggestion: 0,\n        show: false,\n        userInput: suggestions[numberSuggestion]\n      })\n    }\n\n    //Up Arrow\n    else if (e.keyCode === 38){\n      if (numberSuggestion === 0){\n        return;\n      }\n    }\n\n    //Down Arrow\n    else if (e.keyCode === 40){\n      if (numberSuggestion -1 === suggestions.length-1){\n        return\n      }\n\n      this.setState({numberSuggestion: numberSuggestion+1})\n    }\n  }\n\n  render(){\n    const{\n      onChange,\n      onClick,\n      onKeyDown,\n      state: {\n        numberSuggestion,\n        suggestions,\n        show,\n        userInput\n      }\n    } = this\n\n    let suggestionList\n\n    if(show && userInput){\n      console.log(suggestions)\n      if(suggestions.length){\n        console.log(suggestions.length)\n        suggestionList = (\n          <ul class=\"suggestionList\">\n            {suggestions.map((suggestion, index) => {\n              let className\n              if(index===numberSuggestion){\n                className = \"activeSuggestion\"\n              }\n              return(\n                <li className={className} key={suggestion} onClick={onClick}>\n                  {suggestion.name}\n                </li>\n              )\n            })\n            }\n          </ul>\n        )\n      }\n      else{\n        suggestionList = (\n          <div className=\"noSuggestionList\">\n            <p>No matching names</p>\n          </div>\n        )\n      }\n    }\n\n    return (\n      <div>\n        <input\n          type=\"text\"\n          onChange={onChange}\n          onClick={onClick}\n          onKeyDown={onKeyDown}\n          value={userInput}\n        />\n        {suggestionList}\n      </div>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}